git remote -rm folha
git remote rm folha
git remote -v
git remote add folha git@github.com:rubensfernando/datawrapper-embed-folha.git
git remote -v
git push folha master
git pull
git fetch folha
git remote rm folha
git remote add https://github.com/rubensfernando/datawrapper-embed-folha.git
git remote rm origin
git remote add origin https://github.com/rubensfernando/datawrapper-embed-folha.git
git fetch
git fetch master
git remote -v
git fetcj
git fetch
ll
git pull master master
git pull origin master
git --config--global user.email "arte.online@grupofolha.com.br"
git --config --global user.email "arte.online@grupofolha.com.br"
git config --global user.email "arte.online@grupofolha.com.br"
git config --global user.name "arte.online@grupofolha.com.br"
git pull origin master
ll
git fetch
git merge origin/master
git pull origin master
git rm static/publish-embed.js
git rm README.md
git rm templates/publish-embed.twig
ls
git pull origin master
cd ..
ls
rm publish-embed/
rm -r publish-embed/
ls
rm
rm 
rm --help
rm -r publish-embed/
sudo rm -r publish-embed/
ll
cd publish-embed/
ll
cd ..
ls
git clone https://github.com/rubensfernando/datawrapper-embed-folha.git
ll
mv publish-embed/ publish-embed-old/
mv datawrapper-embed-folha/ publish-embed/
ll
ls
cd templates/
ls
ll
cd chart
ls
nano publish.twig 
cd plug
ll
cd pl
cd plugins/
ll
cd theme-folha/
ls
cd templates/
ll
nano default.twig 
cd ..
ls
cd
ls
cd char
cd charts/
cd static/
ls
kk
ll
cd 
cd plugins/the
cd plugins/theme-folha/
ls
cd templates/
l
ll
nano default.twig 
cd 
ls
php scripts/plugin.php install "theme-folha"
cd plugins/theme-folha/
cd templates/
nano default.twig 
cd 
php scripts/plugin.php install "theme-folha"
php scripts/plugin.php uninstall "theme-folha"
php scripts/plugin.php install "theme-folha"
cd plugins/theme-
cd plugins/theme-folha/
git
git remote -v
git init
git remote add origin https://github.com/rubensfernando/theme-folha.git
git remote -v
cd plugins
ll
cd theme-folha/
ll
nano plugin.php 
git remote -v
ls
cd static/
ll
cd ..
cd templates/
ll
nano default.twig 
cd ..
ls
git fetcj
git fetch
cd static/
cd ..
nano package.json 
cd templates/
nano default.twig 
git pull
git pull origin master
nano default.twig 
cd
php scripts/plugin.php install "theme-folha"
cd plugins/theme-folha/templates/
nano default.twig 
cd
cd templates/
ll
cd chart
ll
cd ..
cd theme-core.twig 
nano theme-core.twig 
php scripts/plugin.php install "theme-folha"
open .
ll
cd templates/
cd ..
cd plugins/theme-
cd plugins/theme-autumn/
ll
cd ..
cd plugins/theme-s
cd theme-slate/
ll
nano init.php 
cd //
ls
cd
ll
cd plugins/theme-folha/
cd static/
nano folha.js 
cd ../templates/
nano default.twig 
cd .. nano
cd ..
php 

ll
cd plugin.php 
php 
cd
php 
ls
cd theme/
nano DatawrapperTheme.php
cd
php scripts/plugin.php install "theme-folha"
cd lib/theme/
ll
nano 
nano DatawrapperTheme.php 
cd ..
cd
cd templates/
nano chart
nano theme-core.twig 
cd ..
cd plugins/
ls
cd core-vis-options/
nano
ll
cd templates/
ll
nao controls.twig 
nano controls.twig 
cd ..
nano package.json 
nano plugin.php 
cd static/
ll
cd ..
cd plugin.php 
ls
cd templates/
ll
cd
cd plugins/theme-folha/
git pull
nano plugin.php 
git clone
git pull origin master
git fetch origin
git merge origin/master
git pull origin master
cd templates/
rm default.twig 
ls
cd ..
git pull origin master
git add .
git add
git add .
git pull origin master
git fetch origin --all
git fetch --all
git reset --hard origin/master
ls
nano plugin.php 
git reset --hard origin/master
nano plugin.php 
cd folha
cd lib
cd
cd lib/core/build/classes/datawrapper/
ll
nano Chart.php
cd
cd plugins/theme-folha/
nano plugin.php
cd lib/core/build/classes/datawrapper/
cd
cd lib/core/build/classes/datawrapper/
ls
nano Chart.php
cd
cd templates/
ll
cd chart
ll
nano visualize.twig 
cd
cd lib/core/
ls
cd build/classes/datawrapper/
ll
nano Chart.php
cd lib/core/
cd build/classes/datawrapper/
nano Chart.php 
cd
git remote -v
cd templates/
ll
nano chart.twig 
cd 
nano config.yaml 
cd plugins/theme-folha/
cd static/
nano folha.js 
cd 
php scripts/plugin.php install "theme-folha"
cd plugins/theme-folha/
cd sta
cd sat
cd static/
nano folha.js
ls
cd ..
ls
git pull origin master
cd static/
nano folha.css 
cd 
php scripts/plugin.php install "theme-folha"
cd ..
ll
cd
cd plugins/publish-embed
;s
ls
git remote -v
git pull origin master
cd 
php scripts/plugin.php install "publish-embed"
ls
cd plugins/publish-embed
ls
cd templates/
nano 
nano publish-embed.twig 
cd ..
ls
cd export-print-pdf/
ls
nano plugin.php 
cd //
ls
cd
cd plugins/publish-embed
nano plugin.php 
ls
cd 
php scripts/plugin.php install "publish-embed"
cd plugins/pub
cd plugins/publish-embed
git pull origin master
git fetch origin master
git reset --hard
git fetch --all
git reset --all
git reset --hard
git fetch --all
git reset --hard origin/master
git pull origin master
cd static/
ls
cd
ls
cd vendor/
ls
cd li
cd
cd lib/
cd utils/
ls
cd chart_content.php 
nano chart_content.php 
exit
cd plugins
cd theme-folha/static/
nano folha.css 
cd
php scripts/plugin.php install "theme-folha"
php scripts/plugin.php uninstall "theme-folha"
php scripts/plugin.php install "theme-folha"
cd plugins/theme-folha/static/
git pull origin master
git fecth --all
git fetch --all
git reset --hrad
git reset --hard
git pull origin master
cd
php scripts/plugin.php install "theme-folha"
cd plugins/theme-folha/
git pull origin master
cd
php scripts/plugin.php install "theme-folha"
cd plugins/theme-folha/
git pull origin master
cd 
php scripts/plugin.php install "theme-folha"
cd
cd /var/www/html/datawrapper
ls
ll
nano config.yaml
cd plugins/theme-folha/
ls
git pull origin master
cd
php scripts/plugin.php install "theme-folha"
git
git fetch
git init
git remote add origin https://github.com/rubensfernando/datawrapper.git
git fetch
git fetch -al
git fetch -all
git push
git pull
git diff
git
git diff --help
git diff origin/master
cd ..
ls
cp datawrapper datawrapper_14-05-2015
cp
cp --helop
cp --help
cp -r datawrapper datawrapper_14-05-2015
cd
nano config.yaml 
cd templates/
nano core.twig 
cd
cd lib
cd session/
ll
rm DatawrapperSession.php
nano <?php
/*
 * Datawrapper
 *
 * this singleton object handles all data i/o
 *
 */
class DatawrapperSession {
    protected static $datawrapper;
    public static function getInstance() {
        if (self::$datawrapper === null) self::$datawrapper = new DatawrapperSession();
        return self::$datawrapper;
    }
    /**
     * creates a new instance
     */
    public function __construct() {
        $this->initUser();
    }
    public static function initSession() {
        session_cache_limiter(false);
        $ses = 'DW-SESSION';
        $lifetime = 86400 * 90;  // 90 days
        session_set_cookie_params($lifetime);
        session_name($ses);
        session_cache_limiter('private_no_expire');
        session_cache_expire(1440 * 90);  // 90 days
        session_start();
        // Reset the expiration time upon page load
        if (isset($_COOKIE[$ses]))
            setcookie($ses, $_COOKIE[$ses], time() + $lifetime, "/");
    }
    /**
     * initializes a new user or creates a guest user if not logged in
     */
    protected function initUser() {
        if (isset($_SESSION['dw-user-id']) &&
            (isset($_SESSION['persistent']) ||
             isset($_SESSION['last_action_time']))) {
            if ((isset($_SESSION['persistent']) && $_SESSION['persistent']) ||
                (isset($_SESSION['last_action_time']) && time() - $_SESSION['last_action_time'] < 1800)) {
                $this->user = UserQuery::create()->limit(1)->findPK($_SESSION['dw-user-id']);
                $_SESSION['last_action_time'] = time();
            }
        }
        if (empty($this->user)) {
            // create temporary guest user for this session
            $user = new User();
            $user->setEmail('guest@datawrapper.de');
            $user->setRole('guest');
            $user->setLanguage(self::getBrowserLocale());
            $this->user = $user;
        }
    }
    public function _toArray() {
        $res = array('user' => $this->user->toArray());
        return $res;
    }
    public static function toArray() {
        return self::getInstance()->_toArray();
    }
    private static function getDefaultLocale() {
            return $GLOBALS['dw_config']['languages'][0]['id'];
        }
        return 'en_US';
    }
    private static function getConfiguredLocales() {
        $locales = array('en_US');
            foreach ($GLOBALS['dw_config']['languages'] as $loc) {
                $locales[] = str_replace('-', '_', $loc['id']);
            }
            $locales = array_values(array_unique($locales));
        }
        return $locales;
    }
    private static function getAvailableLocales() {
        $locales = array('en_US');
        foreach (glob(ROOT_PATH . 'locale/*_*.json') as $l) {
            $locales[] = substr(basename($l), 0, 5);
        }
        if (count($locales) > 1) {
            $locales = array_values(array_unique($locales));
        }
        return $locales;
    }
    public static function getBrowserLocale() {
        $configured_locales = self::getConfiguredLocales();
        $available_locales  = self::getAvailableLocales();
        $usable_locales     = array_intersect($configured_locales, $available_locales);
        // filter out locales that are not defined in config.languages
        $locales = isset($_SERVER['HTTP_ACCEPT_LANGUAGE']) ? explode(',', $_SERVER['HTTP_ACCEPT_LANGUAGE']) : array();
        foreach ($locales as $loc) {
            $parts    = explode(';', $loc, 2);
            $pp       = explode('-', $parts[0], 2);
            $language = strtolower($pp[0]);
            if (count($pp) > 1) {
                $locale = $language.'_'.strtoupper($pp[1]);
                if (in_array($locale, $usable_locales)) {
                    return $locale;
                }
            }
            foreach ($usable_locales as $locale) {
                if (substr($locale, 0, 2) === $language) {
                    return $locale;
                }
            }
        }
        return self::getDefaultLocale();
    }
    /**
     * retreive the currently used frontend locale
     *
     * For historical reasons, this is named getLanguage(), even though it always returned the
     * full locale and all places where it's called actually do a substr(_,0,2) themselves.
     */
    public static function getLanguage() {
        // use language set via ?lang=, if set
        if (!empty($_GET['lang'])) return str_replace('-', '_', substr($_GET['lang']));

        // otherwise use user preference, or browser language
        if (self::getUser()->isLoggedIn()) {
            return self::getUser()->getLanguage();
        }
        elseif (isset($_SESSION['dw-lang'])) {
            return $_SESSION['dw-lang'];
        }

        return self::getBrowserLocale();
    }

    /**
     * set a new language for the datawrapper user frontend
     */
    public static function setLanguage($lang) {
        $_SESSION['dw-lang'] = $lang;
        $user = self::getUser();
        $user->setLanguage($lang);
        if ($user->getRole() != 'guest') {
            $user->save(); // remember language setting
        }
    }

    /* checks if a user is logged in */
    public static function isLoggedIn() {
        return self::getInstance()->user->getRole() != 'guest';
    }

    public static function getUser() {
        return self::getInstance()->user;
    }

    public static function login($user, $keepLoggedIn = true, $dontLog = false) {
        $_SESSION['dw-user-id'] = $user->getId();
        self::getInstance()->user = $user;
        if (!$dontLog) Action::logAction($user, 'login');

        // In case the user sent herself a password reset link, but remembered the password in the
        // meantime (or someone else triggered the reset link mail), we should reset the password
        // token now.
        $user->setResetPasswordToken('')->save();

        // reload plugins since there might be new plugins
        // becoming available after logins
        DatawrapperPluginManager::load();

        $_SESSION['persistent'] = $keepLoggedIn;
        $_SESSION['last_action_time'] = time();

        // make sure that the charts of the guest now belong to
        // the logged or newly created user
        $charts = ChartQuery::create()->findByGuestSession(session_id());
        foreach ($charts as $chart) {
            $chart->setAuthorId($user->getId());
            $chart->setGuestSession('');
            $chart->save();
        }

        // restore user organization
        if (empty($_SESSION['dw-user-organization'])) {
            // let's check the last chart
            $lastChart = ChartQuery::create()
                ->filterByUser($user)
                ->filterByOrganizationId(null, Criteria::ISNOTNULL)
                ->orderByLastModifiedAt(Criteria::DESC)
                ->findOne();
                $_SESSION['dw-user-organization'] = $lastChart->getOrganization()->getId();
            }
        }
    }
    public static function logout() {
        Action::logAction(self::getInstance()->user, 'logout');
        $_SESSION['dw-user-id'] = null;
        $_SESSION['dw-user-organization'] = null;
        self::getInstance()->initUser();
        setcookie('DW-SESSION', null, 0, '/');
    }
    /*
     * load chart meta data from database
     */
    public static function getChartMetaData($chart_id) {
    }
    public static function setChartMetaData($chart_id, $chart_info) {
    }
}
nano DatawrapperSession.php
cd
nano config.yaml 
cd controller
nano login.php 
ll
cd
cd locale/
ll
cd tem
cd
cd templates/
nano core.twig 
cd
nano config.yaml 
cd
cd locale/
ll
rm pt_BR.json 
nano pt_BR.json
cd
cd plugins/theme-folha/
git pull origin master
cd local
cd locale/
rm pt_BR.json 
nano pt_BR.json
cd
cd templates
ll
cd chart
ll
cd visualize
ls
cd ..
nano describe.twig 
cd visualize
ls
cd ..
nano visualize
nano visualize.twig 
cd visualize
nano sidebar.twig 
php 
php scripts/plugin.php install "theme-folha"
cd plugins/theme-folha/
git pull origin master
cd
php scripts/plugin.php install "theme-folha"
ll
cd plugins/theme-folha/
git pull origin master
cd
php scripts/plugin.php install "theme-folha"
cd plugins/theme-folha/
git pull origin master
cd
php scripts/plugin.php install "theme-folha"
cd plugins/
cd theme-f
cd theme-folha/
cd templ
cd templates/
ll
nano folha.twig 
ll
git remote -v
git diff
git fetch
git fetch origin master
git diff
git 
git diff origin
git diff
git pull
git push
git pull
cd ..
ll
cd datawrapper
cd lib/session/
ll
nano DatawrapperSession.php 
cd 
cd
cd ..
ls
cp datawrapper datawrapper250515
cp -r datawrapper datawrapper250515
sudo cp -r datawrapper datawrapper250515
ll
cd datawrapper
ll
cd www/
cd static/
mkdir custom
ll
cd custom/
ll
cd folha/
ll
cd
nano config.yaml 
cd templates/custom/
ls
ll
nano home-folha.twig
cd 
cd templates/
nano core.twig 
cd
nano templates/core.twig 
nano templates/header.twig 
nano config.yaml 
nano templates/header.twig 
nano config.yaml 
nano lib/session/DatawrapperSession.php 
nano templates/chart/upload.twig 
nano templates/core.twig 
cd www/
nano .htaccess 
cd
cd plugins/theme-folha/
git pull origin master
cd ../publish-embed
git pull origin master
cd
cd scripts/
php plugin.php install "*"
php plugin.php uninstall "theme-*"
php plugin.php install "theme-folha"
cd ../plugins/theme-folha/
git pull origin master
cd ../../scripts/
git pull origin master
php plugin.php install "theme-folha"
ll
cd ..
ll
cd plugins/
ll
rm -r theme-folha 
ll
cd ..
cd scripts/
ll
php plugin.php install "theme-folha"
php plugin.php install "publish-embed"
nano 
cd
nano confi
nano templates/header.twig
nano templates/core.twig 
nano lib/session/DatawrapperSession.php 
nano plugins/visualization-line-chart/
nano plugins/visualization-line-chart/static/line-chart.js 
nano config.yaml
nano templates/core.twig 
nano templates/header.twig 
nano templates/core.twig 
nano templates/
cd templates/
ll
cd ..
nano lib/utils/chart_content.php 
nano plugins/visualization-raphael-chart/init.php 
nano lib/utils/chart_content.php 
nano plugins/visualization-raphael-chart/init.php 
nano lib/utils/chart_content.php 
nano plugins/visualization-raphael-chart/init.php 
cd plugins/theme-folha/

cd
php plugin.php install "theme-folha"
cd scripts/
php plugin.php install "theme-folha"
cd
nano plugins/visualization-column-charts/
nano plugins/visualization-column-charts/static/column-chart.js 
cd
php scripts/plugin.php install "visualization-column-charts"
nano ..plugins/visualization-column-charts/static/column-chart.js 
nano ../plugins/visualization-column-charts/static/column-chart.js 
nano plugins/visualization-column-charts/static/column-chart.js 
php scripts/plugin.php install "visualization-column-charts"
nano plugins/visualization-column-charts/static/column-chart.js 
php scripts/plugin.php install "visualization-column-charts"
nano plugins/visualization-column-charts/static/column-chart.js 
php scripts/plugin.php install "visualization-column-charts"
exit
nano plugins/visualization-column-charts/
nano plugins/visualization-column-charts/static/column-chart.js 
nano plugins/theme-folha/
nano plugins/theme-folha/static/folha.js 
php scripts/plugin
nano plugins/visualization-column-charts/static/column-chart.js 
php scripts/plugin.php install "visualization-column-charts"
php scripts/plugin.php install "theme-folha"
nano plugins/visualization-column-charts/static/column-chart.js 
nano plugins/theme-folha/static/folha.js
nano plugins/theme-folha/templates/folha.twig 
nano plugins/theme-folha/static/folha.css 
php scripts/plugin.php install "theme-folha"
nano plugins/theme-folha/static/folha.js
php scripts/plugin.php install "theme-folha"
nano plugins/theme-folha/static/folha.js
php scripts/plugin.php install "theme-folha"
pwd
ll
 cd plugins/
ll
php ../scripts/plugin.php desable
php ../scripts/plugin.php disable "export-print-pdf"
php ../scripts/plugin.php disable "export-zip"
ll
nano plugins/theme-folha/static/folha.j
nano plugins/theme-folha/static/folha.js 
nano config.yaml 
exit
cd plugins/theme-folha/
git pull origin master
git fetch
git reset --hard
git pull origin master
cd
php scripts/plugin.php install "theme-folha"
ll
cd plugins/theme-folha/
ll
git pull origin master
cd
php scripts/plugin.php install "theme-folha"
cd plugins/theme-folha/
git pull origin master
cd 
php scripts/plugin.php install "theme-folha"
cd plugins/theme-folha/
php ../../scripts/plugin.php install "theme-folha"
git pull origin master
php ../../scripts/plugin.php install "theme-folha"
git pull origin master
php ../../scripts/plugin.php install "theme-folha"
cd plugins/publish-embed
git pull origin master
cd
cd plugins/publish-embed
php ../../scripts/plugin.php install "publish-embed"
git pull origin master
php ../../scripts/plugin.php install "publish-embed"
cd
php ../../scripts/plugin.php install "theme-folha"
cd plugins/theme-folha/
git pull origin master
php ../../scripts/plugin.php install "theme-folha"
git pull origin master
php ../../scripts/plugin.php install "theme-folha"
git pull origin master
php ../../scripts/plugin.php install "theme-folha"
cd lib-bkp/
cd core/build/conf/
nano datawrapper-conf.php
ll
rm
mv templates/ templates-bkp
ll
nano config.yaml 
cd www/static/
ll
cd vendor/
ll
cd underscore/
ll
cd
mv lib/ lib-bkp
ll
nano config.yaml 
cd lib/
ll
cd core/build/conf/
ll
nano datawrapper-conf.php
ll
cd
ll
cd plugins/
ll
php ../scripts/plugin.php install "admin-dashboard"
ll
nano ../templates/chart/publish.twig 
cd
ll
nano controller/chart/publish.php 
ll
ls
mv controller/ controller-bkp/
ll
cd dw.js/
grunt
ll
cd plugins/theme-folha/
ll
git pull
cd
php scripts/plugin.php install "theme-folha"
cd plugins/theme-folha/
git pull
cd 
php scripts/plugin.php install "theme-folha"
cd plugins/
ll
cd ..
php scripts/plugin.php install "export-zip"
ll
cd plugins/theme-folha/
git pull
cd
php scripts/plugin.php install "theme-folha"
cd plugins/theme-folha/
git pull
php ../../scripts/plugin.php install "theme-folha"
ll
cd plugins/
ll
cd 
php ../scripts/plugin.php uninstall "admin-dashboard"
php scripts/plugin.php uninstall "admin-dashboard"
cd plugins/
ls
php scripts/plugin.php uninstall "export-print-pdf"
php ../scripts/plugin.php uninstall "export-print-pdf"
php ../scripts/plugin.php install "export-print-pdf"
ll
php ../scripts/plugin.php uninstall ""
php scripts/plugin.php install "visualization-data-table"
cd plugins/publish-embed
git pull
cd
php scripts/plugin.php install "publish-embed"
ll
php scripts/plugin.php install "visualization-pie-chart"
cd plugins/publish-embed
ll
git pull
cd
php scripts/plugin.php install "publish-embed"
php scripts/plugin.php install "visualization-data-table"
ll
cd plugins/publish-embed
php scripts/plugin.php install "publish-embed"
git pull
php ../../scripts/plugin.php install "publish-embed"
ll
cd plugins/publish-embed
git pull
cd
php scripts/plugin.php install "publish-embed"
ll
folha
cd www/
ll
cd
cd plugins/publish-embed
git pull
cd 
php scripts/plugin.php install "publish-embed"
ll
cd tudo sobre
cd plugins/publish-embed
git pull
cd
php scripts/plugin.php install "publish-embed"
ll
cd charts/
ll
cd data/
ll
cd ..
cd exports/
ll
cd static
cd..
cd ..
ll
cd static/
ll
cd GTJPm
ll
nano inde
ll
nano index.html 
ll
pwd
